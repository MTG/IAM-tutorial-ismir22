

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Meter analysis &#8212;  </title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/myfile.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'rhythmic_analysis/meter_analysis';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Percussion transcription" href="percussion-transcription.html" />
    <link rel="prev" title="Automatic raga recognition" href="../melodic_analysis/raga-recognition.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../landing.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="  - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="  - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../landing.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../introduction/setup.html">Setting everything up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/python.html">Python for audio processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/compiam.html">compIAM package</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Indian Art Music</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../indian_art_music/iam.html">What is Indian Art Music?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indian_art_music/carnatic-music.html">Carnatic Music</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indian_art_music/hindustani-music.html">Hindustani music</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Corpora and Datasets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../corpora_and_datasets/corpora.html">Accessing the Dunya Corpora</a></li>
<li class="toctree-l1"><a class="reference internal" href="../corpora_and_datasets/datasets.html">Datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Melodic Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../melodic_analysis/tonic-identification.html">Tonic identification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../melodic_analysis/pitch-extraction.html">Pitch extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../melodic_analysis/melodic-transcription.html">Melodic transcription</a></li>
<li class="toctree-l1"><a class="reference internal" href="../melodic_analysis/melodic-pattern-discovery.html">Melodic pattern dicovery</a></li>

<li class="toctree-l1"><a class="reference internal" href="../melodic_analysis/raga-recognition.html">Automatic raga recognition</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Rhythmic Analysis</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Meter analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="percussion-transcription.html">Percussion transcription</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Structure Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../structure_analysis/music-segmentation.html">Music segmentation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Timbre Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../timbre_analysis/stroke-classification.html">Stroke classification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Music Source Separation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../separation/singing-voice-extraction.html">Singing voice extraction</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Demos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../resources/exploring-performance.html">Exploring performance</a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../resources/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/open-challenges.html">Open challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/citing.html">Citing this work</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/MTG/IAM-tutorial-ismir22/blob/master/webbook/rhythmic_analysis/meter_analysis.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/MTG/IAM-tutorial-ismir22" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/MTG/IAM-tutorial-ismir22/issues/new?title=Issue%20on%20page%20%2Frhythmic_analysis/meter_analysis.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/rhythmic_analysis/meter_analysis.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Meter analysis</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#carnatic-and-hindustani-music-rhyhtm-datasets">Carnatic and Hindustani Music Rhyhtm datasets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#akshara-pulse-tracker">Akshara pulse tracker</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="meter-analysis">
<span id="id1"></span><h1>Meter analysis<a class="headerlink" href="#meter-analysis" title="Permalink to this heading">#</a></h1>
<p>In the musical introduction, the main rhythmic characteristics of Carnatic and Hindustani traditions are provided. The presented hierarchical form of a tala is targeted in <span id="id2">[<a class="reference internal" href="../resources/references.html#id61" title="Ajay Srinivasamurthy and Xavier Serra. A supervised approach to hierarchical metrical cycle tracking from audio music recordings. In In Proc. of the International Conference on Acoustics, Speech and Signal Processing (ICASSP), 5217–5221. 2014. doi:10.1109/ICASSP.2014.6854598.">SS14b</a>]</span>, using a supervised approach on top of spectral hand-crafted features that capture tempo and onsets in the signal. Bayesian models are found to be the most capable of capture the rhythmic cycles in music signals, first applied in the form of particle filters <span id="id3">[<a class="reference internal" href="../resources/references.html#id62" title="Ajay Srinivasamurthy, Andre Holzapfel, Ali Taylan Cemgil, and Xavier Serra. Particle filters for efficient meter tracking with dynamic Bayesian networks. In In Proc. of the 16th International Society for Music Information Retrieval Conference (ISMIR), 197–203. 2015.">SHCS15</a>]</span> for an efficient inference, showing competetitive results on Carnatic recordings. The said approach is futher extended to a generalized model to capture long cycles <span id="id4">[<a class="reference internal" href="../resources/references.html#id63" title="Ajay Srinivasamurthy, Andre Holzapfel, Ali Taylan Cemgil, and Xavier Serra. A generalized bayesian model for tracking long metrical cycles in acoustic music signals. In In Proc. of the International Conference on Acoustics, Speech and Signal Processing (ICASSP), 76–80. 3 2016. doi:10.1109/ICASSP.2016.7471640.">SHTCS16</a>]</span>, being this very convenient for rhythm tracking in Hindustani Music.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Installing (if not) and importing compiam to the project</span>
<span class="kn">import</span> <span class="nn">importlib.util</span>
<span class="k">if</span> <span class="n">importlib</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="s1">&#39;compiam&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1">## Bear in mind this will only run in a jupyter notebook / Collab session</span>
    <span class="o">%</span><span class="k">pip</span> install git+git://github.com/MTG/compIAM.git
<span class="kn">import</span> <span class="nn">compiam</span>

<span class="c1"># Import extras and supress warnings to keep the tutorial clean</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">IPython.display</span> <span class="k">as</span> <span class="nn">ipd</span>

<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="carnatic-and-hindustani-music-rhyhtm-datasets">
<span id="cmr-hmr"></span><h2>Carnatic and Hindustani Music Rhyhtm datasets<a class="headerlink" href="#carnatic-and-hindustani-music-rhyhtm-datasets" title="Permalink to this heading">#</a></h2>
<p>That is a precise moment to introduce the (CompMusic) <a class="reference external" href="https://zenodo.org/record/1264394">Carnatic</a> and <a class="reference external" href="https://zenodo.org/record/1264742">Hindustani</a> Rhythm Datasets. These datasets, which include audio recordings, musically-relevant metadata, and beat and meter annotations, can be downloaded from Zenodo under request and used through the <code class="docutils literal notranslate"><span class="pre">mirdata</span></code> dataloaders available from <a class="reference external" href="https://github.com/mir-dataset-loaders/mirdata/releases/tag/0.3.7">release 0.3.7</a>. These dataset present useful for the metrical and beat estimation research on Indian Art Music.</p>
<p>Let’s initialise an instance of these datasets and browse through the available data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmr</span> <span class="o">=</span> <span class="n">compiam</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span>
    <span class="s2">&quot;compmusic_carnatic_rhythm&quot;</span><span class="p">,</span>
    <span class="n">data_home</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;../audio/mir_datasets&quot;</span><span class="p">),</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;full_dataset&quot;</span>
<span class="p">)</span>
<span class="n">cmr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The compmusic_carnatic_rhythm dataset
----------------------------------------------------------------------------------------------------


Call the .cite method for bibtex citations.
----------------------------------------------------------------------------------------------------


CompMusic Carnatic Music Rhythm class

    Args:
        track_id (str): track id of the track
        data_home (str): Local path where the dataset is stored. default=None
            If `None`, looks for the data in the default directory, `~/mir_datasets`

    Attributes:
        audio_path (str): path to audio file
        beats_path (srt): path to beats file
        meter_path (srt): path to meter file

    Cached Properties:
        beats (BeatData): beats annotation
        meter (string): meter annotation
        mbid (string): MusicBrainz ID
        name (string): name of the recording in the dataset
        artist (string): artists name
        release (string): release name
        lead_instrument_code (string): code for the load instrument
        taala (string): taala annotation
        raaga (string): raaga annotation
        num_of_beats (int): number of beats in annotation
        num_of_samas (int): number of samas in annotation

    ----------------------------------------------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<p>For showcasing purposes, we include a single-track version of the (CompMusic) Carnatic Rhythm Dataset within the materials of this tutorial. This dataset is private, but can be requested and downloaded for research purposes.</p>
<p>Reading through the dataset details we observe the available data for the tracks in the dataloader. We will load the tracks and select the specific track we have selected for tutoring purposes. Bear in mind that you can access the list of identifiers in the dataloader with the <code class="docutils literal notranslate"><span class="pre">.track_ids</span></code> attribute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmr</span><span class="o">.</span><span class="n">download</span><span class="p">([</span><span class="s2">&quot;index&quot;</span><span class="p">])</span>  <span class="c1"># mirdata&gt;0.3.8 needs to dowload index</span>
<span class="n">track</span> <span class="o">=</span> <span class="n">cmr</span><span class="o">.</span><span class="n">load_tracks</span><span class="p">()[</span><span class="s2">&quot;10001&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.00B [00:00, ?B/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2024-11-28 12:48:32,861] ERROR [root.download_from_remote:258] 
                            mirdata failed to download the dataset from hhttps://zenodo.org/records/14007971/files/compmusic_carnatic_rhythm_full_index_1.0.json?download=1!
                            Please try again in a few minutes.
                            If this error persists, please raise an issue at
                            https://github.com/mir-dataset-loaders/mirdata,
                            and tag it with &#39;broken-link&#39;.
                            
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.00B [00:00, ?B/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------
URLError                                  Traceback (most recent call last)
Cell In [3], line 1
----&gt; 1 cmr.download([&quot;index&quot;])  # mirdata&gt;0.3.8 needs to dowload index
      2 track = cmr.load_tracks()[&quot;10001&quot;]

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/core.py:455, in Dataset.download(self, partial_download, force_overwrite, cleanup, allow_invalid_checksum)
    428 def download(
    429     self,
    430     partial_download=None,
   (...)
    433     allow_invalid_checksum=False,
    434 ):
    435     &quot;&quot;&quot;Download data to `save_dir` and optionally print a message.
    436 
    437     Args:
   (...)
    453 
    454     &quot;&quot;&quot;
--&gt; 455     download_utils.downloader(
    456         self.data_home,
    457         remotes=self.remotes,
    458         index=self._index_data,
    459         partial_download=partial_download,
    460         info_message=self._download_info,
    461         force_overwrite=force_overwrite,
    462         cleanup=cleanup,
    463         allow_invalid_checksum=allow_invalid_checksum,
    464     )

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/download_utils.py:155, in downloader(save_dir, remotes, index, partial_download, info_message, force_overwrite, cleanup, allow_invalid_checksum)
    147     download_tar_file(
    148         remotes[k],
    149         save_dir,
   (...)
    152         allow_invalid_checksum,
    153     )
    154 else:
--&gt; 155     download_from_remote(
    156         remotes[k], save_dir, force_overwrite, allow_invalid_checksum
    157     )
    159 if remotes[k].unpack_directories:
    160     for src_dir in remotes[k].unpack_directories:
    161         # path to destination directory

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/download_utils.py:259, in download_from_remote(remote, save_dir, force_overwrite, allow_invalid_checksum)
    249             error_msg = &quot;&quot;&quot;
    250                         mirdata failed to download the dataset from {}!
    251                         Please try again in a few minutes.
   (...)
    256                 remote.url
    257             )
    258             logging.error(error_msg)
--&gt; 259             raise exc
    260 else:
    261     logging.info(
    262         &quot;{} already exists and will not be downloaded. &quot;.format(download_path)
    263         + &quot;Rerun with force_overwrite=True to delete this file and force the download.&quot;
    264     )

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/download_utils.py:242, in download_from_remote(remote, save_dir, force_overwrite, allow_invalid_checksum)
    238 with DownloadProgressBar(
    239     unit=&quot;B&quot;, unit_scale=True, unit_divisor=1024, miniters=1
    240 ) as t:
    241     try:
--&gt; 242         urllib.request.urlretrieve(
    243             remote.url,
    244             filename=download_path,
    245             reporthook=t.update_to,
    246             data=None,
    247         )
    248     except Exception as exc:
    249         error_msg = &quot;&quot;&quot;
    250                     mirdata failed to download the dataset from {}!
    251                     Please try again in a few minutes.
   (...)
    256             remote.url
    257         )

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:241, in urlretrieve(url, filename, reporthook, data)
    224 &quot;&quot;&quot;
    225 Retrieve a URL into a temporary location on disk.
    226 
   (...)
    237 data file as well as the resulting HTTPMessage object.
    238 &quot;&quot;&quot;
    239 url_type, path = _splittype(url)
--&gt; 241 with contextlib.closing(urlopen(url, data)) as fp:
    242     headers = fp.info()
    244     # Just return the local path and the &quot;headers&quot; for file://
    245     # URLs. No sense in performing a copy unless requested.

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:216, in urlopen(url, data, timeout, cafile, capath, cadefault, context)
    214 else:
    215     opener = _opener
--&gt; 216 return opener.open(url, data, timeout)

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:519, in OpenerDirector.open(self, fullurl, data, timeout)
    516     req = meth(req)
    518 sys.audit(&#39;urllib.Request&#39;, req.full_url, req.data, req.headers, req.get_method())
--&gt; 519 response = self._open(req, data)
    521 # post-process response
    522 meth_name = protocol+&quot;_response&quot;

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:541, in OpenerDirector._open(self, req, data)
    538 if result:
    539     return result
--&gt; 541 return self._call_chain(self.handle_open, &#39;unknown&#39;,
    542                         &#39;unknown_open&#39;, req)

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:496, in OpenerDirector._call_chain(self, chain, kind, meth_name, *args)
    494 for handler in handlers:
    495     func = getattr(handler, meth_name)
--&gt; 496     result = func(*args)
    497     if result is not None:
    498         return result

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:1419, in UnknownHandler.unknown_open(self, req)
   1417 def unknown_open(self, req):
   1418     type = req.type
-&gt; 1419     raise URLError(&#39;unknown url type: %s&#39; % type)

URLError: &lt;urlopen error unknown url type: hhttps&gt;
</pre></div>
</div>
</div>
</div>
<p>Let’s print out the available annotations for this example track.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">track</span><span class="o">.</span><span class="n">beats</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">track</span><span class="o">.</span><span class="n">beats</span>

<span class="ne">NameError</span>: name &#39;track&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">BeatData</span></code> is an annotation type that is used in <code class="docutils literal notranslate"><span class="pre">mirata</span></code> to store information related to rhythmic beats. We will print the time-steps for the first 20 annotated beats.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">track</span><span class="o">.</span><span class="n">beats</span><span class="o">.</span><span class="n">times</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">track</span><span class="o">.</span><span class="n">beats</span><span class="o">.</span><span class="n">times</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;track&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Let’s also observe the actual magnitude of these annotations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">track</span><span class="o">.</span><span class="n">beats</span><span class="o">.</span><span class="n">time_unit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">track</span><span class="o">.</span><span class="n">beats</span><span class="o">.</span><span class="n">time_unit</span>

<span class="ne">NameError</span>: name &#39;track&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>We have confirmed that the beats are annotated in <code class="docutils literal notranslate"><span class="pre">s</span></code>, seconds. We can also observe the positons in the cycle (if available) that each of the beats occupy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">track</span><span class="o">.</span><span class="n">beats</span><span class="o">.</span><span class="n">positions</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">track</span><span class="o">.</span><span class="n">beats</span><span class="o">.</span><span class="n">positions</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;track&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mirdata</span></code> annotations have been created aiming at providing standardized and useful data structures for MIR-related annotations. In this example we showcase the use of <code class="docutils literal notranslate"><span class="pre">BeatData</span></code>, but many more annotation types are included in <code class="docutils literal notranslate"><span class="pre">mirdata</span></code>. Make sure to <a class="reference external" href="https://mirdata.readthedocs.io/en/latest/source/mirdata.html#annotations">check them out</a>!.</p>
<p>Let’s now observe how the meter annotations looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">track</span><span class="o">.</span><span class="n">meter</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">track</span><span class="o">.</span><span class="n">meter</span>

<span class="ne">NameError</span>: name &#39;track&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Unfortunately, no tools to track the beats or the meter in Indian Art Music performances are available in <code class="docutils literal notranslate"><span class="pre">compiam</span></code> as of now. We are looking forward to covering these tasks in the near future!</p>
<p>Nonetheless, in this section we would like to showcase a relevant tool to track the <a class="reference internal" href="../indian_art_music/carnatic-music.html#carnatic-rhythm"><span class="std std-ref">aksharas</span></a> in a music recording.</p>
</section>
<section id="akshara-pulse-tracker">
<span id="id5"></span><h2>Akshara pulse tracker<a class="headerlink" href="#akshara-pulse-tracker" title="Permalink to this heading">#</a></h2>
<p>Let’s first listen to the audio example we are going to be using to showcase this tool. We will just load the first 30 seconds (we can just slice the audio array from 0 to <span class="math notranslate nohighlight">\(f_{s} * sec\)</span>, being <span class="math notranslate nohighlight">\(sec\)</span> the integer  number of seconds to get).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s listen to 30 seconds of the input audio</span>
<span class="n">cmr</span><span class="o">.</span><span class="n">download</span><span class="p">([</span><span class="s2">&quot;index&quot;</span><span class="p">])</span>  <span class="c1"># mirdata&gt;0.3.8 needs to dowload index</span>
<span class="n">track</span> <span class="o">=</span> <span class="n">cmr</span><span class="o">.</span><span class="n">load_tracks</span><span class="p">()[</span><span class="s2">&quot;10001&quot;</span><span class="p">]</span>
<span class="n">audio</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="n">audio</span>
<span class="n">ipd</span><span class="o">.</span><span class="n">Audio</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">audio</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">10</span><span class="o">*</span><span class="n">sr</span><span class="p">],</span>
    <span class="n">rate</span><span class="o">=</span><span class="n">sr</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.00B [00:00, ?B/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2024-11-28 12:48:33,331] ERROR [root.download_from_remote:258] 
                            mirdata failed to download the dataset from hhttps://zenodo.org/records/14007971/files/compmusic_carnatic_rhythm_full_index_1.0.json?download=1!
                            Please try again in a few minutes.
                            If this error persists, please raise an issue at
                            https://github.com/mir-dataset-loaders/mirdata,
                            and tag it with &#39;broken-link&#39;.
                            
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.00B [00:00, ?B/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------
URLError                                  Traceback (most recent call last)
Cell In [9], line 2
      1 # Let&#39;s listen to 30 seconds of the input audio
----&gt; 2 cmr.download([&quot;index&quot;])  # mirdata&gt;0.3.8 needs to dowload index
      3 track = cmr.load_tracks()[&quot;10001&quot;]
      4 audio, sr = track.audio

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/core.py:455, in Dataset.download(self, partial_download, force_overwrite, cleanup, allow_invalid_checksum)
    428 def download(
    429     self,
    430     partial_download=None,
   (...)
    433     allow_invalid_checksum=False,
    434 ):
    435     &quot;&quot;&quot;Download data to `save_dir` and optionally print a message.
    436 
    437     Args:
   (...)
    453 
    454     &quot;&quot;&quot;
--&gt; 455     download_utils.downloader(
    456         self.data_home,
    457         remotes=self.remotes,
    458         index=self._index_data,
    459         partial_download=partial_download,
    460         info_message=self._download_info,
    461         force_overwrite=force_overwrite,
    462         cleanup=cleanup,
    463         allow_invalid_checksum=allow_invalid_checksum,
    464     )

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/download_utils.py:155, in downloader(save_dir, remotes, index, partial_download, info_message, force_overwrite, cleanup, allow_invalid_checksum)
    147     download_tar_file(
    148         remotes[k],
    149         save_dir,
   (...)
    152         allow_invalid_checksum,
    153     )
    154 else:
--&gt; 155     download_from_remote(
    156         remotes[k], save_dir, force_overwrite, allow_invalid_checksum
    157     )
    159 if remotes[k].unpack_directories:
    160     for src_dir in remotes[k].unpack_directories:
    161         # path to destination directory

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/download_utils.py:259, in download_from_remote(remote, save_dir, force_overwrite, allow_invalid_checksum)
    249             error_msg = &quot;&quot;&quot;
    250                         mirdata failed to download the dataset from {}!
    251                         Please try again in a few minutes.
   (...)
    256                 remote.url
    257             )
    258             logging.error(error_msg)
--&gt; 259             raise exc
    260 else:
    261     logging.info(
    262         &quot;{} already exists and will not be downloaded. &quot;.format(download_path)
    263         + &quot;Rerun with force_overwrite=True to delete this file and force the download.&quot;
    264     )

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/site-packages/mirdata/download_utils.py:242, in download_from_remote(remote, save_dir, force_overwrite, allow_invalid_checksum)
    238 with DownloadProgressBar(
    239     unit=&quot;B&quot;, unit_scale=True, unit_divisor=1024, miniters=1
    240 ) as t:
    241     try:
--&gt; 242         urllib.request.urlretrieve(
    243             remote.url,
    244             filename=download_path,
    245             reporthook=t.update_to,
    246             data=None,
    247         )
    248     except Exception as exc:
    249         error_msg = &quot;&quot;&quot;
    250                     mirdata failed to download the dataset from {}!
    251                     Please try again in a few minutes.
   (...)
    256             remote.url
    257         )

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:241, in urlretrieve(url, filename, reporthook, data)
    224 &quot;&quot;&quot;
    225 Retrieve a URL into a temporary location on disk.
    226 
   (...)
    237 data file as well as the resulting HTTPMessage object.
    238 &quot;&quot;&quot;
    239 url_type, path = _splittype(url)
--&gt; 241 with contextlib.closing(urlopen(url, data)) as fp:
    242     headers = fp.info()
    244     # Just return the local path and the &quot;headers&quot; for file://
    245     # URLs. No sense in performing a copy unless requested.

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:216, in urlopen(url, data, timeout, cafile, capath, cadefault, context)
    214 else:
    215     opener = _opener
--&gt; 216 return opener.open(url, data, timeout)

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:519, in OpenerDirector.open(self, fullurl, data, timeout)
    516     req = meth(req)
    518 sys.audit(&#39;urllib.Request&#39;, req.full_url, req.data, req.headers, req.get_method())
--&gt; 519 response = self._open(req, data)
    521 # post-process response
    522 meth_name = protocol+&quot;_response&quot;

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:541, in OpenerDirector._open(self, req, data)
    538 if result:
    539     return result
--&gt; 541 return self._call_chain(self.handle_open, &#39;unknown&#39;,
    542                         &#39;unknown_open&#39;, req)

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:496, in OpenerDirector._call_chain(self, chain, kind, meth_name, *args)
    494 for handler in handlers:
    495     func = getattr(handler, meth_name)
--&gt; 496     result = func(*args)
    497     if result is not None:
    498         return result

File /opt/hostedtoolcache/Python/3.11.10/x64/lib/python3.11/urllib/request.py:1419, in UnknownHandler.unknown_open(self, req)
   1417 def unknown_open(self, req):
   1418     type = req.type
-&gt; 1419     raise URLError(&#39;unknown url type: %s&#39; % type)

URLError: &lt;urlopen error unknown url type: hhttps&gt;
</pre></div>
</div>
</div>
</div>
<p>We now import the onset detection tool from <code class="docutils literal notranslate"><span class="pre">compiam.rhythm.meter</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We import the tool</span>
<span class="kn">from</span> <span class="nn">compiam.rhythm.meter</span> <span class="kn">import</span> <span class="n">AksharaPulseTracker</span>

<span class="c1"># Let&#39;s initialize an instance of the tool</span>
<span class="n">apt</span> <span class="o">=</span> <span class="n">AksharaPulseTracker</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Likewise the other extractors and models in <code class="docutils literal notranslate"><span class="pre">compiam</span></code> (if not indicated otherwise), the method for inference takes an audio path as input.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predicted_aksharas</span> <span class="o">=</span> <span class="n">apt</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">track</span><span class="o">.</span><span class="n">audio_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s see all the information about the aksharas that the system estimates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">predicted_aksharas</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="nb">list</span><span class="p">(</span><span class="n">predicted_aksharas</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="ne">NameError</span>: name &#39;predicted_aksharas&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Let’s now print out some details on each estimated aspect of the aksharas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;sections&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;sections&#39;</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;predicted_aksharas&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;aksharaPeriod&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;aksharaPeriod&#39;</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;predicted_aksharas&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;aksharaPulses&#39;</span><span class="p">][:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;aksharaPulses&#39;</span><span class="p">][:</span><span class="mi">4</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;predicted_aksharas&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;APcurve&#39;</span><span class="p">][:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;APcurve&#39;</span><span class="p">][:</span><span class="mi">4</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;predicted_aksharas&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>We can now use the <code class="docutils literal notranslate"><span class="pre">compiam.visualisation</span></code> to plot the input audio with the annotations on top.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compiam.visualisation.audio</span> <span class="kn">import</span> <span class="n">plot_waveform</span>
<span class="n">help</span><span class="p">(</span><span class="n">plot_waveform</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on function plot_waveform in module compiam.visualisation.audio:

plot_waveform(input_data, t1, t2, labels=None, input_sr=44100, sr=44100, output_path=None, verbose=False)
    Plotting waveform between two given points with optional labels
    
    :param input_data: path to audio file or numpy array like audio signal
    :param input_sr: sampling rate of the input array of data (if any). This variable is only
        relevant if the input is an array of data instead of a filepath.
    :param t1: starting point for plotting
    :param t2: ending point for plotting
    :param labels: dictionary {time_stamp:label} to plot on top of waveform
    :param sr: sampling rate
    :param output_path: optional path (finished with .png) where the plot is saved
</pre></div>
</div>
</div>
</div>
<p>We observe that the <code class="docutils literal notranslate"><span class="pre">labels</span></code> input variable in <code class="docutils literal notranslate"><span class="pre">plot_waveforms</span></code> needs to be a dict with the following format: <code class="docutils literal notranslate"><span class="pre">{time-step:</span> <span class="pre">label}</span></code>, while our estimation is basically a list of pulses. Therefore, we first need to convert the prediction into a dictionary. We take the predicted beats, convert these into a dictionary, and plot them on top of the waveform of the input signal again, in order to compare between the estimation and the ground-truth above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pulses</span> <span class="o">=</span> <span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;aksharaPulses&#39;</span><span class="p">]</span>
<span class="n">predicted_beats_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">time_step</span><span class="p">:</span> <span class="n">idx</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">time_step</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pulses</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># And we plot!</span>
<span class="n">plot_waveform</span><span class="p">(</span>
    <span class="n">input_data</span><span class="o">=</span><span class="n">track</span><span class="o">.</span><span class="n">audio_path</span><span class="p">,</span>
    <span class="n">t1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">t2</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">predicted_beats_dict</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">pulses</span> <span class="o">=</span> <span class="n">predicted_aksharas</span><span class="p">[</span><span class="s1">&#39;aksharaPulses&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">predicted_beats_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="nn">      3     time_step: idx for idx, time_step</span> in <span class="ni">enumerate</span><span class="nt">(pulses)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="p">}</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># And we plot!</span>

<span class="ne">NameError</span>: name &#39;predicted_aksharas&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "MTG/IAM-tutorial-ismir22",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./rhythmic_analysis"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../melodic_analysis/raga-recognition.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Automatic raga recognition</p>
      </div>
    </a>
    <a class="right-next"
       href="percussion-transcription.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Percussion transcription</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#carnatic-and-hindustani-music-rhyhtm-datasets">Carnatic and Hindustani Music Rhyhtm datasets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#akshara-pulse-tracker">Akshara pulse tracker</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Thomas Nuttall, Genís Plaja-Roglans, Lara Pearson, Brindha Manickavasakan, Kaustuv Kanti Ganguli, Ajay Srinivasamurthy and Xavier Serra
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>